# 更新日志

本文档记录项目的所有重要变更。

## [未发布]

### 新增
- 初始项目设置
- 基础项目文档结构
- Gradle 构建配置
- 安全传送位置系统
  - 使用精确浮点坐标记录位置
  - 基于坐标值的标准高度判断（整数或0.5的倍数）
  - 自动调整到标准高度位置
  - 设置家时显示高度调整信息
- 数据库升级功能
  - 自动迁移表结构从整数到浮点坐标
  - 高精度坐标存储和恢复

### 变更
- 数据库架构
  - 坐标字段类型从 INTEGER 改为 REAL
  - HomeLocation 类使用 double 类型存储坐标
  - 优化了坐标显示格式（保留小数点后两位）
- 位置处理逻辑
  - 从使用整数坐标到使用精确浮点坐标
  - 移除了所有坐标标准化处理，保留完全原始坐标
  - 简化了位置记录和恢复流程

### 修复
- 修复了 `/back` 命令在同维度传送后不工作的问题
  - 在各传送命令执行前添加位置记录功能
- 修复了非标准高度位置记录的问题
  - 使用玩家精确浮点坐标而非整数方块坐标
  - 改用数学方法判断和调整高度值
- 修复了Java lambda表达式编译错误
  - 在使用lambda表达式时正确处理非final变量
  - 为lambda引用的变量创建final副本
- 修复了坐标处理逻辑
  - 现在只调整Y坐标到标准高度，而保留X和Z的精确值
  - 确保传送到准确的水平位置

### 移除
- 无 